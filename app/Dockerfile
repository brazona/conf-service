FROM openjdk:25
LABEL maintainer=Brazona\ CÃ©zar
VOLUME /tmp

ARG ARG_SPRING_ACTIVE_PROFILE=local
ARG ARG_GITHUB_TOKEN
ARG ARG_GITHUB_USER
ARG ARG_CONFIG_SERVER_PASS
ARG ARG_CONFIG_SERVER_ENCRYPT_KEY
ARG ARG_GITHUB_BRANCH=main

ENV SPRING_ACTIVE_PROFILE=$ARG_SPRING_ACTIVE_PROFILE
ENV GITHUB_TOKEN=$ARG_GITHUB_TOKEN
ENV GITHUB_USER=$ARG_GITHUB_USER
ENV CONFIG_SERVER_PASS=$ARG_CONFIG_SERVER_PASS
ENV CONFIG_SERVER_ENCRYPT_KEY=$ARG_CONFIG_SERVER_ENCRYPT_KEY
ENV GITHUB_BRANCH=$ARG_GITHUB_BRANCH
ENV GITHUB_URL=$ARG_GITHUB_URL

CMD echo "$SPRING_ACTIVE_PROFILE, $GITHUB_TOKEN, $GITHUB_USER, $CONFIG_SERVER_PASS, $CONFIG_SERVER_ENCRYPT_KEY, $GITHUB_BRANCH"

COPY ./target/*.jar app.jar

ENTRYPOINT ["java","-jar","/app.jar"]